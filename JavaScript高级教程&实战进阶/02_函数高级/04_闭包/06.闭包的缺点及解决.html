<!--
 * @Descripttion: 
 * @version: 
 * @Author: by_mori
 * @Date: 2021-09-20 17:01:12
 * @LastEditors: by_mori
 * @LastEditTime: 2021-09-20 17:20:04
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>闭包的缺点及解决</title>
    <!--  1.缺点
            函数执行完后，函数内的局部变量没有释放， 占用内存时间会变长
            容易造成内存泄露
          2.解决
            能不用闭包就不用
            及时释放
 -->
    <script>
      function fn1() {
        var arr = new Array(100000);
        // var arr =new Array[10000]; //Array[10000] is not a constructor
        function fn2() {
          console.log(arr.length);
        }
        return fn2;
      }
      var f = fn1();
      f();
      f = null; //让内部函数成为垃圾对象-->回收闭包

      //   还有一个解决方式,调用时直接f()()直接运行调用即可-->匿名函数,用完自动就销毁了
    </script>
  </head>
  <body></body>
</html>
